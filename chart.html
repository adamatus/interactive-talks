<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="style.css">
    <link type="text/css" rel="stylesheet" href="charts.css">
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </head>
  <body>
    <div id="body">
      <div id="header">
         A page with a chart
      </div>
      <div id="chart">
      </div>
      <script type="text/javascript">
var data = [{year: 2006, books: 54},
            {year: 2007, books: 43},
            {year: 2008, books: 41},
            {year: 2009, books: 44},
            {year: 2010, books: 35}];

var padding = 30,
    barWidth = 40,
    width = (barWidth + 10) * data.length,
    height = 400,
    started = false,
    on = 'green',
    off = 'red';


var x = d3.scale.linear().domain([0, data.length]).range([0, width]);
var y = d3.scale.linear().domain([0, d3.max(data, function(datum) { return datum.books; })]).
  rangeRound([0, height]);

var barDemo = d3.select("#chart").
  append("svg:svg").
  attr("width", width).
  attr("height", height+padding);

barDemo.selectAll("rect").
  data(data).
  enter().
  append("svg:rect").
  attr("x", function(datum, index) { return x(index); }).
  attr("y", function(datum) { return height - y(datum.books); }).
  attr("height", function(datum) { return y(datum.books); }).
  attr("fill",on).
  on("mouseover",function() {
    d3.select(this)
     .transition()
        .duration(500)
        .attr("fill",off);}).
  on("mouseout",function() {
    d3.select(this)
     .transition()
        .duration(500)
        .attr("fill",on);}).
  attr("width", barWidth);

barDemo.selectAll("text").
  data(data).
  enter().
  append("svg:text").
  attr("x", function(datum, index) { return x(index) + barWidth; }).
  attr("y", function(datum) { return height - y(datum.books); }).
  attr("dx", -barWidth/2).
  attr("dy", "1.2em").
  attr("text-anchor", "middle").
  text(function(datum) { return datum.books;}).
  attr("fill", "white");

barDemo.selectAll("text.yAxis").
  data(data).
  enter().append("svg:text").
  attr("x", function(datum, index) { return x(index) + barWidth; }).
  attr("y", height).
  attr("dx", -barWidth/2).
  attr("text-anchor", "middle").
  text(function(datum) { return datum.year;}).
  attr("transform", "translate(0, 18)").
  attr("class", "yAxis");


  function up() {
          var tmp = off;
          off = on;
          on = tmp;
          barDemo.selectAll("rect").
            attr("fill",on);
  };

  function down() {
      up();
  }


      </script>
    </div>
  </body>
</html>

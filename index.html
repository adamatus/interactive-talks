
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Embodiment and Language Comprehension</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <style type="text/css">

body {
  background: #000;
  position: relative;
  width: 1024px;
  height: 768px;
  margin: auto;
  overflow: hidden;
}

iframe {
  border: none;
  position: absolute;
  width: 1024px;
  height: 768px;
  background: #fff;
  -moz-transition-property: -moz-transform, opacity;
  -moz-transition-duration: 500ms;
  -ms-transition-property: -ms-transform, opacity;
  -ms-transition-duration: 500ms;
  -webkit-transition-property: -webkit-transform, opacity;
  -webkit-transition-duration: 500ms;
}

#previous {
  opacity: 0;
  -moz-transform: translateX(-1300px);
  -ms-transform: translateX(-1300px);
  -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1300, 0, 0, 1);
}

#current {
  opacity: 1;
  -moz-transform: translateX(0);
  -ms-transform: translateX(0);
  -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
}

#next {
  opacity: 0;
  -moz-transform: translateX(1300px);
  -ms-transform: translateX(1300px);
  -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1300, 0, 0, 1);
}

#about {
  font: 14px "Helvetica Neue";
  position: absolute;
  width: 1280px;
  top: 840px;
}

#menu {
    z-index: 2;
  font: 14px "Helvetica Neue";
  position: absolute;
  width: 300px;
  top: 20px;
  left: 800px;
  display: none;
}

select {
    width: 200px;
}

#about, #about a {
  color: #fff;
}

    </style>
  </head>
  <body>
      <div id="menu">
          <form>
              <select
                  onchange="navigate(this.options[this.selectedIndex].value)">
                  <option value=0>Home</option>
                  <option value=1>Page 1</option>
                  <option value=2>Page 2</option>
                  <option value=3>Very, very, very long value</option>
              </select>
          </form>
      </div>
    <iframe id="previous"></iframe>
    <iframe id="current"></iframe>
    <iframe id="next"></iframe>
    <div id="about">
Source: <a href="http://malmo.psych.wisc.edu/lectures/fmri">http://malmo.psych.wisc.edu/lectures/fmri</a>
    </div>
    <script type="text/javascript">

var slides = [
  "title.html",
//  "http://www.forbes.com/sites/julietbarbara/2012/02/05/why-watching-football-may-make-you-smarter/print/",
  "newell_simon.html",
  "chinese_room.html",
  "stevan_harnad.html",
  "yaxley.html",
  "yaxley_task.html",
  "yaxley_results.html",
//  "http://mhpbooks.com/47021/done-the-edge-question-2012-cognitive-scientists-explain-how-our-brains-sees-the-world-in-metaphors/",
  "desai.html",
  "desai_task.html",
  "desai_stimuli.html",
  "desai_brainsA.html",
  "desai_brainsB.html",
  "desai_summary.html",
  "pulvermuller_tms.html",
];

var previous = d3.select("#previous"),
    current = d3.select("#current"),
    next = d3.select("#next"),
    query = "?" + Date.now(),
    visible = false,
    previousIndex,
    currentIndex = +location.hash.substring(1) || 0,
    nextIndex;

resize();
step(0);

d3.select(window).on("resize", resize).on("hashchange", function hashchange() {
  var that = d3.select(this).on("hashchange", null);
  currentIndex = +location.hash.substring(1);
  step(0);
  that.on("hashchange", hashchange);
});

d3.selectAll("iframe").on("load", function() {
  this.contentWindow.focus();
  d3.select(this.contentWindow).on("keydown", function() {
    switch (d3.event.keyCode) {
      case 39: // right arrow
      case 32: // space
      case 34: { // page down
        step(+1);
        break;
      }
      case 8: { // delete
        step(d3.event.shiftKey ? +1 : -1);
        break;
      }
      case 37: // left arrow
      case 33: { // page up
        step(-1);
        break;
      }
      case 36: { // home
        currentIndex = 0;
        step(0);
        break;
      }
      case 35: { // end
        currentIndex = slides.length - 1;
        step(0);
        break;
      }
      case 38: { // Up
        // Surely a way to d3 this, but don't know it at the moment
        if (document.getElementById('current').contentWindow.up != null)
        {
            document.getElementById('current').contentWindow.up();
        }
        break;
      }
      case 40: { // Down
        // Surely a way to d3 this, but don't know it at the moment
        if (document.getElementById('current').contentWindow.down != null)
        {
            document.getElementById('current').contentWindow.down();
        }
        break;
      }
      case 48: { // 0 key, pop up menu
           if (!visible)
           {
            d3.selectAll("#menu").style("display", "block");
            visible = true;
           } else {
            d3.selectAll("#menu").style("display", "none");
            visible = false;
           }
      }
      default: return;
    }
    d3.event.preventDefault();
  });
});

// Keep approximately in middle of screen
function resize() {
  d3.select("body").style("margin-top", (window.innerHeight - 800) / 3 + "px");
}

function navigate(delta) {
    d3.selectAll("#menu").style("display", "none");
    visible = false;
    console.log(delta);
    step(delta);
}

function step(delta) {
  if (delta > 0) {
    var temp = previous;
    previousIndex = currentIndex;
    previous = current.attr("id", "previous");
    currentIndex = nextIndex;
    current = next.attr("id", "current");
    nextIndex = nextIndex >= slides.length - 1 ? 0 : nextIndex + 1;
    next = temp.attr("id", "next");
  } else if (delta < 0) {
    var temp = next;
    nextIndex = currentIndex;
    next = current.attr("id", "next");
    currentIndex = previousIndex;
    current = previous.attr("id", "current");
    previousIndex = previousIndex <= 0 ? slides.length - 1 : previousIndex - 1;
    previous = temp.attr("id", "previous");
  } else {
    nextIndex = currentIndex >= slides.length - 1 ? 0 : currentIndex + 1;
    previousIndex = currentIndex <= 0 ? slides.length - 1 : currentIndex - 1;
  }
  location.hash = currentIndex;
  previous.transition().delay(750).duration(0).attr("src", slides[previousIndex] + query);
  current.transition().delay(250).duration(0).attr("src", slides[currentIndex] + query);
  next.transition().delay(750).duration(0).attr("src", slides[nextIndex] + query);
}

    </script>
  </body>
</html>


<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <link type="text/css" rel="stylesheet" href="css/slide.css">
    <link type="text/css" rel="stylesheet" href="css/charts.css">
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </head>
  <body>
    <div id="slide">
      <div id="header">
          <h1>Experiment 2 Mixture Model</h1>
      </div>
      <div id="content-frame" class='with-only-head'>
          <div id="content">
              <div id="chart">
                  <!-- Plot gets inserted in here -->
              </div>
          </div>
      </div>
      <script type="text/javascript">

var width = 400,
    height = 400;

var margins = [50, 50, 50, 50], mb = margins[0], ml = margins[1], mt = margins[2], mr = margins[3];
var w = width - (ml + mr),
    h = height - (mb + mt);
var x = d3.scale.linear().range([0, w]).domain([0,99]);
var y = d3.scale.linear().range([h, 0]).domain([0,.1]);

var svg = d3.select('#chart').append('svg:svg')
    .attr('class', 'chart')
    .attr("width", width)
    .attr("height", height);

var line = function() {};
line = d3.svg.line()
        .interpolate('monotone')
        //.interpolate('linear')
        .x(function(d,i) { return x(i); }) 
        .y(function(d) { return y(d); });

var gaussian = function(x,sigma,mu) {
    return (1/(sigma * Math.sqrt(2*Math.PI))) * Math.pow(Math.E,Math.pow((x-mu)/sigma,2)/(-2)); 
};

// Setup main target line
var d = [];
for (i=0; i<100; i++) { d.push(gaussian(i,5,50)); }

// Setup main + non-target lines
var nt_left = [];
for (i=0;i<30; i++) { nt_left.push(gaussian(i,5,15)); }
var tar_mid = [];
for (i=30;i<70; i++) { tar_mid.push(gaussian(i,5,50)); }
var nt_right = [];
for (i=0;i<30; i++) { nt_right.push(gaussian(i+70,5,85)); }


var plot = svg.append('g').attr('id','plot').attr('transform','translate('+ml+','+mt+')');

// Add x-axis
plot.append("g")
      .attr("class", "x axis")
      .append('svg:line')
        .attr('x2',w)
        .attr('y1',y(0))
        .attr('y2',y(0));

plot.select('.x.axis').append('svg:text')
    .text('Participant Response').style('text-anchor','middle')
    .attr('transform','translate('+(w/2)+','+(h+30)+') ');

// Add y-axis
plot.append("g")
      .attr("class", "y axis")
      .append('svg:line')
        .attr('x1',x(0))
        .attr('x2',x(0))
        .attr('y1',0)
        .attr('y2',h);

plot.select('.y.axis').append('svg:text')
    .attr('id','ylab')
    .text('Response Probability')
    .style('text-anchor','middle')
    .attr('transform','translate(-30,'+(h/2)+') rotate(-90)');

// Add target line
plot.append('svg:path')
    .classed('target-line',true)
    .style('fill','green')
    .style('stroke-width',3)
    .style('stroke','black')
    .attr('d', line(d));

// Add guess rect
plot.append('svg:rect')
    .classed('guess-line',true)
    .attr('width',w)
    .attr('height',40)
    .attr('x',0)
    .attr('y',h-40)
    .style('fill-opacity',1)
    .style('fill','blue');

d3.select('.target-line').attr('transform','translate(0,-40)');

      </script>
    </div>
  </body>
</html>
